<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pasta League â€” Season 2025 ğŸ</title>

<style>
  body {
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    overflow-x: hidden;
  }

  h1 {
    text-shadow: 0 0 15px gold;
    font-size: 2.2em;
    margin-top: 30px;
  }

  h2 {
    color: gold;
    text-shadow: 0 0 10px yellow;
  }

  button {
    padding: 12px 25px;
    font-size: 16px;
    border: none;
    background: gold;
    color: black;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 15px;
    transition: 0.3s;
  }

  button:hover { background: #ffcc00; transform: scale(1.05); }

  #draw-results {
    margin-top: 20px;
    font-size: 18px;
    white-space: pre-line;
    text-shadow: 0 0 10px gold;
  }

  #timestamp {
    margin-top: 10px;
    color: #66ccff;
    font-size: 14px;
  }

  #last-update {
    margin-top: 15px;
    color: #00ffff;
    font-size: 14px;
    text-shadow: 0 0 10px #00ffff;
  }

  #logo-screen {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: black;
    display: flex;
    justify-content: center;
    align-items: center;
    color: gold;
    font-size: 2em;
    text-shadow: 0 0 20px gold;
    animation: fadeOut 2.5s ease-in-out forwards;
    animation-delay: 2s;
    z-index: 9999;
  }

  @keyframes fadeOut {
    to { opacity: 0; visibility: hidden; }
  }
</style>
</head>

<body>
<div id="logo-screen">ğŸ Pasta League ğŸ</div>

<h1>ğŸ Pasta League â€” Season 2025 ğŸ</h1>

<h2>Next Round Draw ğŸ²</h2>
<div id="admin-section" style="display:none;">
  <button onclick="drawNextRound()">×‘×¦×¢ ×”×’×¨×œ×” ×œ××—×–×•×¨ ×”×‘×</button>
</div>

<div id="draw-results"></div>
<div id="timestamp"></div>
<div id="last-update"></div>

<script>
const players = ["Shabo", "Ilya", "Liad", "Aviv", "Elior", "Yarden", "Arthur", "Gil", "Alex", "Tibi"];
const password = "pastaAdmin"; // ×¨×§ ××ª×” ×™×•×“×¢
let data = JSON.parse(localStorage.getItem("pastaMatches")) || { round: 0, playedPairs: [], results: "" };

// ×”×¦×’×ª ×”×”×’×¨×œ×” ×”××—×¨×•× ×” (×× ×§×™×™××ª)
if (data.results) {
  document.getElementById("draw-results").innerText = data.results;
  document.getElementById("timestamp").innerText = "×”×•×’×¨×œ ×‘×ª××¨×™×š: " + data.time;
  document.getElementById("last-update").innerText = "ğŸ“… ×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”: " + data.time;
}

// ×× ××ª×” ×× ×”×œ â€” ×ª×¨××” ××ª ×”×›×¤×ª×•×¨
const isAdmin = confirm("×”×× ××ª×” ×× ×”×œ ×”×œ×™×’×”?");
if (isAdmin) document.getElementById("admin-section").style.display = "block";

// ×¤×•× ×§×¦×™×” ×œ×‘×—×™×¨×ª ××©×—×§×™× ×—×“×©×™× ×‘×œ×™ ×—×–×¨×•×ª
function drawNextRound() {
  const entered = prompt("×”×›× ×¡ ×¡×™×¡××ª ×× ×”×œ ×›×“×™ ×œ×‘×¦×¢ ×”×’×¨×œ×”:");
  if (entered !== password) {
    alert("×’×™×©×” × ×“×—×ª×” âŒ â€” ×¨×§ ×× ×”×œ ×”×œ×™×’×” ×™×›×•×œ ×œ×‘×¦×¢ ×”×’×¨×œ×”.");
    return;
  }

  if (data.round >= 9) {
    alert("ğŸ‰ ×›×œ 9 ×”××—×–×•×¨×™× ×©×•×—×§×•!");
    return;
  }

  let matches = [];
  let used = new Set(data.playedPairs);

  const shuffled = [...players].sort(() => Math.random() - 0.5);
  let available = [...shuffled];

  while (available.length >= 2) {
    const p1 = available.shift();
    let p2Index = available.findIndex(p => !used.has(pairKey(p1, p)));
    if (p2Index === -1) break;
    const p2 = available.splice(p2Index, 1)[0];
    used.add(pairKey(p1, p2));
    matches.push(`${p1} ğŸ†š ${p2}`);
  }

  data.round++;
  const now = new Date();
  const timeString = now.toLocaleString("he-IL");
  const results = `âš½ ××—×–×•×¨ ${data.round} âš½\n\n${matches.join("\n")}`;

  data.results = results;
  data.playedPairs = Array.from(used);
  data.time = timeString;
  localStorage.setItem("pastaMatches", JSON.stringify(data));

  document.getElementById("draw-results").innerText = results;
  document.getElementById("timestamp").innerText = "×”×•×’×¨×œ ×‘×ª××¨×™×š: " + timeString;
  document.getElementById("last-update").innerText = "ğŸ“… ×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”: " + timeString;

  alert("âœ… ×”×”×’×¨×œ×” ×œ××—×–×•×¨ " + data.round + " × ×©××¨×” ×‘×”×¦×œ×—×”!");
}

function pairKey(a, b) {
  return [a, b].sort().join("-");
}
</script>

</body>
</html>
