<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pasta League â€” Season 2025</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Splash logo (2sec) -->
  <div id="splash">
    <div class="logo">ğŸ Pasta League</div>
  </div>

  <main class="container">

    <header class="page-title">
      <h1>Pasta League â€” Season 2025</h1>
    </header>

    <!-- ===== League Table ===== -->
    <section class="card">
      <h2 class="glow-title">League Table</h2>
      <div class="table-wrap">
        <table id="leagueTable" class="neon-table">
          <thead>
            <tr>
              <th>RANK</th>
              <th>PLAYER</th>
              <th>W</th>
              <th>D</th>
              <th>L</th>
              <th>GF</th>
              <th>GA</th>
              <th>PTS</th>
            </tr>
          </thead>
          <tbody id="leagueBody">
            <!-- JS fills -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- ===== Top Scorers ===== -->
    <section class="card">
      <h2 class="glow-title alt">Top Scorers âš½</h2>
      <div class="table-wrap">
        <table id="scorersTable" class="neon-table neon-alt">
          <thead>
            <tr><th>Rank</th><th>Player</th><th>Goals</th></tr>
          </thead>
          <tbody id="scorersBody"></tbody>
        </table>
      </div>
    </section>

    <!-- ===== Draw Section ===== -->
    <section class="card">
      <h2 class="glow-title">Next Round Draw</h2>
      <div id="drawInfo" class="updated">Last update: â€”</div>
      <ul id="drawList" class="draw-list"></ul>

      <div class="btn-row">
        <button id="drawBtn" class="btn btn-primary">Make Draw</button>
        <button id="resetBtn" class="btn btn-ghost">Reset Draw</button>
      </div>
    </section>

    <footer class="footer">
      <a class="link" href="players.html">ğŸ“¸ Players list</a>
    </footer>
  </main>

  <script>
  const players = [
    { name: "Shabo", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Ilya", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Liad", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Aviv", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Elior", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Yarden", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Arthur", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Gil", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Alex", W:0, D:0, L:0, GF:0, GA:0, Pts:0 },
    { name: "Tibi", W:0, D:0, L:0, GF:0, GA:0, Pts:0 }
  ];

  const leagueBody = document.getElementById("leagueBody");
  players.forEach((p, i) => {
    const tr = document.createElement("tr");
    if (i === 0) tr.classList.add("rank-1");
    else if (i < 2) tr.classList.add("auto-qual");
    else if (i < 6) tr.classList.add("playoff");
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${p.name} ${i===0?'ğŸ†':''}${i===1?'ğŸ¥ˆ':''}</td>
      <td>${p.W}</td>
      <td>${p.D}</td>
      <td>${p.L}</td>
      <td>${p.GF}</td>
      <td>${p.GA}</td>
      <td>${p.Pts}</td>
    `;
    leagueBody.appendChild(tr);
  });

  // Scorers table
  const scorersBody = document.getElementById("scorersBody");
  players.slice(0,5).forEach((p,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${i+1}</td><td>${p.name}</td><td>0</td>`;
    scorersBody.appendChild(tr);
  });

  // Draw system
  const drawList = document.getElementById("drawList");
  const drawInfo = document.getElementById("drawInfo");
  const drawBtn = document.getElementById("drawBtn");
  const resetBtn = document.getElementById("resetBtn");
  const PASS = "1122";

  let fixtures = JSON.parse(localStorage.getItem("fixtures") || "[]");
  let dateSaved = localStorage.getItem("fixturesDate") || "";

  function displayFixtures() {
    drawList.innerHTML = fixtures.length
      ? fixtures.map(f => `<li>${f}</li>`).join("")
      : "<li class='muted'>No draw yet</li>";
    drawInfo.textContent = dateSaved ? "Last update: " + dateSaved : "Last update: â€”";
  }

  displayFixtures();

  drawBtn.onclick = () => {
    const pass = prompt("Enter password:");
    if (pass !== PASS) return alert("Wrong password!");
    const shuffled = [...players].sort(() => Math.random() - 0.5);
    const newFixtures = [];
    for (let i = 0; i < shuffled.length; i += 2) {
      if (shuffled[i + 1]) newFixtures.push(`${shuffled[i].name} âš”ï¸ ${shuffled[i + 1].name}`);
    }
    fixtures = newFixtures;
    dateSaved = new Date().toLocaleString();
    localStorage.setItem("fixtures", JSON.stringify(fixtures));
    localStorage.setItem("fixturesDate", dateSaved);
    displayFixtures();
  };

  resetBtn.onclick = () => {
    const pass = prompt("Enter password:");
    if (pass !== PASS) return alert("Wrong password!");
    fixtures = [];
    dateSaved = "";
    localStorage.removeItem("fixtures");
    localStorage.removeItem("fixturesDate");
    displayFixtures();
  };

  // Splash delay
  setTimeout(() => {
    document.getElementById("splash").classList.add("hide");
  }, 1800);
  </script>

</body>
</html>
